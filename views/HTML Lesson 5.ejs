<html>
    <style>
   body{text-align: center;}
    body, html {
  height: 150%;
  margin: 0;
}

.bg {
  /* The image used */
  background-image: url("code.jpg");

  /* Full height */
  height: 100%;

  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}
h3{color: white;}


    </style>
<head>
   <script>
   function Closeout(){
    window.close();
   }
   </script>
</head>
<body class="bg">

    <iframe width="806" height="454" src="https://www.youtube.com/embed/Gempe3O_yZk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
   <br>
   <br>
    <button onclick="location.href='/'; Closeout()">Finished Lesson</button>
</iframe>
<head>
  <title>Live IDE</title>
  <style type="text/css" media="screen">
      #editor {
          position: absolute;
          top: 550px;
          right: 0;
          bottom: -500px;
          left: 0;
      }
  </style>
  </head>
  <body>
  <div id="editor" width='500' height='500'></div>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" type="text/javascript" charset="utf-8">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.1/socket.io.js">
  </script>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
      let editor = ace.edit("editor");
      editor.session.setMode('ace/mode/html');
      const log = console.log;

      editor.setTheme("ace/theme/monokai");



      let socket = io('http://localhost:3000');
      let textarea = editor.textInput.getElement();

      /*editor.session.on('change', function(delta) {
        let code = editor.getValue();
        socket.send(code);
      });*/

      textarea.addEventListener('keyup', (evt) => {
        let code = editor.getValue();
        console.log(socket.id);
        socket.send(code);
        console.log(code);
      });

      socket.on('newDelta', (delta) => {
        applyingChanges = true;
        aceDocument.applyDelta(delta);
        applyingChanges = false;
      });
      socket.on('message', (data) => {
        editor.setValue(data);
      });

  });
  </script>
</body>
</html>
