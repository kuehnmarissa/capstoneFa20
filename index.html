<html>
<title> Realtime IDE </title>
<head>
  <style type="text/css" media="screen">
    #editor {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }
</style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" type="text/javascript" charset="utf-8"></script>
  <script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/javascript");
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.1/socket.io.js">
  </script>
  <script>
  document.addEventListener('DOMContentLoaded', function () {

  let socket = io('http://localhost:3000');
  console.log('here');
  const log = console.log;


  const ide = document.getElementById("ide");
  ide.addEventListener('keyup' , (evt) => {
    const code = ide.value;
    socket.send(code);
  });

  socket.on('message', (data) => {
    ide.value = data;
    log(ide.value);
  });
});
  </script>
</head>
  <body>
    <!--<h3>Realtime Editor</h3>-->
    <div id='editor'>function foo(items) {
        var x = "All this is syntax highlighted";
        return x;
    }
    </div>
    <!--<div>
    <textarea rows="30" cols="50" id="ide" style="background-color: dimgray; color: white" placeholder="Type your code here..."></textarea>
    </div>-->
  </body>





</html>
